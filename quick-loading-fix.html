<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quick Loading Fix - SHADOWDEF</title>
    
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/loading.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="screen active">
        <div class="loading-container">
            <div class="logo-container">
                <div class="logo-text">SHADOWDEF</div>
                <div class="logo-subtitle">Hack the Invisible</div>
            </div>
            
            <div class="loading-progress">
                <div class="progress-label" id="progress-label">Loading Game Assets...</div>
                <div class="progress-bar-bg">
                    <div class="progress-bar-fill" id="loading-progress-fill"></div>
                </div>
                <div class="progress-percentage" id="loading-percentage">0%</div>
            </div>
            
            <div class="loading-dots">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </div>

    <script>
        // Super simple loading that definitely works
        const progressFill = document.getElementById('loading-progress-fill');
        const progressPercentage = document.getElementById('loading-percentage');
        const progressLabel = document.getElementById('progress-label');
        
        const steps = [
            { text: 'Initializing Core Systems...', progress: 15, duration: 800 },
            { text: 'Loading Game Assets...', progress: 35, duration: 1000 },
            { text: 'Preparing Audio Systems...', progress: 50, duration: 600 },
            { text: 'Loading Mission Data...', progress: 70, duration: 800 },
            { text: 'Initializing Security Protocols...', progress: 85, duration: 600 },
            { text: 'Finalizing Setup...', progress: 100, duration: 500 }
        ];
        
        let currentStep = 0;
        let currentProgress = 0;
        
        function updateProgress() {
            if (currentStep >= steps.length) {
                // Loading complete
                progressLabel.textContent = 'Loading Complete!';
                setTimeout(() => {
                    alert('Loading completed! This proves the loading system works.');
                }, 1000);
                return;
            }
            
            const step = steps[currentStep];
            progressLabel.textContent = step.text;
            
            console.log(`Step ${currentStep + 1}: ${step.text} -> ${step.progress}%`);
            
            // Animate to target progress
            const targetProgress = step.progress;
            const startProgress = currentProgress;
            const progressDiff = targetProgress - startProgress;
            const animationDuration = step.duration;
            const frameRate = 60;
            const totalFrames = (animationDuration / 1000) * frameRate;
            const progressPerFrame = progressDiff / totalFrames;
            
            let frame = 0;
            const animateFrame = () => {
                frame++;
                currentProgress = startProgress + (progressPerFrame * frame);
                
                if (currentProgress >= targetProgress) {
                    currentProgress = targetProgress;
                }
                
                progressFill.style.width = currentProgress + '%';
                progressPercentage.textContent = Math.floor(currentProgress) + '%';
                
                if (frame < totalFrames && currentProgress < targetProgress) {
                    requestAnimationFrame(animateFrame);
                } else {
                    // Move to next step
                    currentStep++;
                    setTimeout(updateProgress, 200);
                }
            };
            
            requestAnimationFrame(animateFrame);
        }
        
        // Start loading after page loads
        document.addEventListener('DOMContentLoaded', () => {
            console.log('ðŸŽ® Starting simple loading test...');
            setTimeout(updateProgress, 500);
        });
    </script>
</body>
</html>